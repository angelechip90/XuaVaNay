<app-header [title]="'account.info.title' | translate" [showBackButton]="true">
</app-header>

<!-- Content -->
<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Avatar + tên -->
  <section class="hero">
    <div class="avatar-wrap">
      <div class="avatar">
        <img
          [src]="userInfo().Avatar || '/assets/image/default-avatar.png'"
          alt="Avatar"
        />
      </div>
    </div>

    <div class="title-block">
      <div class="title-with-edit">
        <h1>{{ userInfo().FullName || userInfo().UserName || '---' }}</h1>
        <ion-icon
          name="create-outline"
          class="edit-icon"
          (click)="editAccount()"
        ></ion-icon>
      </div>
      <p class="fs-14 color-light-gray font-weight-400">
        {{ userInfo().Email }}
      </p>
    </div>
  </section>

  <!-- Thông tin chi tiết -->
  <section class="list">
    <!-- Tên đầy đủ -->
    <div class="row">
      <div class="icon">
        <ion-icon name="person-outline"></ion-icon>
      </div>
      <div class="label">{{ 'account.info.fullName' | translate }}</div>
      <div class="value">{{ userInfo().FullName || '---' }}</div>
    </div>
    <div class="divider"></div>

    <!-- Email -->
    <div class="row">
      <div class="icon">
        <ion-icon name="mail-outline"></ion-icon>
      </div>
      <div class="label">{{ 'account.info.email' | translate }}</div>
      <div class="value accent">{{ userInfo().Email || '---' }}</div>
    </div>
    <div class="divider"></div>

    <!-- Số điện thoại -->
    <div class="row">
      <div class="icon">
        <ion-icon name="call-outline"></ion-icon>
      </div>
      <div class="label">{{ 'account.info.phoneNumber' | translate }}</div>
      <div class="value">{{ userInfo().PhoneNumber || '---' }}</div>
    </div>
    <div class="divider"></div>

    <!-- Địa chỉ -->
    <div class="row">
      <div class="icon">
        <ion-icon name="location-outline"></ion-icon>
      </div>
      <div class="label">{{ 'account.info.address' | translate }}</div>
      <div class="value">{{ userInfo().Address || '---' }}</div>
    </div>
    <div class="divider"></div>

    <!-- Ngày tạo tài khoản -->
    <div class="row">
      <div class="icon">
        <ion-icon name="calendar-outline"></ion-icon>
      </div>
      <div class="label">{{ 'account.info.createdDate' | translate }}</div>
      <div class="value">
        {{ (userInfo().CreatedDate | date:'dd/MM/yyyy') || '---' }}
      </div>
    </div>
    <div class="divider"></div>

    <!-- Trạng thái xác thực email -->
    <div class="row">
      <div class="icon">
        <ion-icon
          [name]="userInfo().EmailConfirmed ? 'checkmark-circle-outline' : 'close-circle-outline'"
        ></ion-icon>
      </div>
      <div class="label">{{ 'account.info.emailConfirmed' | translate }}</div>
      <div class="value" [class.accent]="userInfo().EmailConfirmed">
        {{ userInfo().EmailConfirmed ? ('account.info.confirmed' | translate) :
        ('account.info.notConfirmed' | translate) }}
      </div>
    </div>
  </section>
  <section class="ion-display-flex ion-justify-content-center margin-top-20">
    <ion-button mode="ios" color="danger" fill="outline" class="ion-no-margin padding-horizontal-30 width-90" id="open-modal">
      {{ 'account.removeAccount' | translate }}
    </ion-button>
  </section>

  <ion-modal #modal trigger="open-modal" [initialBreakpoint]="0.6">
    <ng-template>
      <ion-content>
        <div class="sheet">
          <!-- Header -->
          <div class="sheet__header">
            <div class="sheet__title">Xác nhận xóa tài khoản</div>

            <button class="sheet__close" (click)="modal.dismiss()">
              <ion-icon name="close-outline" slot="icon-only"></ion-icon>
            </button>
          </div>

          <!-- Body -->
          <div class="sheet__body">
            <p class="sheet__p">
              Rất tiếc, vì bạn chọn xóa tài khoản của mình trên XuaVaNay, vui lòng
              đọc kĩ các
              <a class="sheet__link" (click)="openTerms()"
                >Điều khoản sử dụng</a
              >
              và
              <a class="sheet__link" (click)="openPolicy()"
                >Quy chế hoạt động</a
              >
              của chúng tôi trước khi xóa.
            </p>

            <p class="sheet__p sheet__note">Xin lưu ý:</p>

            <ul class="sheet__list">
              <li>
                Việc xóa/hủy tài khoản XuaVaNay là vĩnh viễn và không thể khôi phục.
                Đồng nghĩa bạn không thể đăng nhập hoặc xem lại các thông báo
                trong ứng dụng sau khi tài khoản đã bị xóa.
              </li>
              <li>
                Việc yêu cầu xóa/hủy tài khoản XuaVaNay cần phải được XuaVaNay chấp thuận.
                Để đảm bảo yêu cầu xóa/hủy tài khoản XuaVaNay của bạn được chấp
                thuận.
              </li>
              <li>
                Sau khi bạn đã hủy tài khoản XuaVaNay hiện tại, XuaVaNay có quyền từ chối
                những yêu cầu thiết lập tài khoản mới của bạn trong tương lai.
              </li>
            </ul>
          </div>

          <!-- Footer buttons -->
          <div class="sheet__footer">
            <button class="btn-cancel" (click)="modal.dismiss()">Hủy</button>

            <button class="btn-danger" (click)="removeAccount()">
              Gửi yêu cầu
            </button>
          </div>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
