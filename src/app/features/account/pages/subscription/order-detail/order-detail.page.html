<app-header [title]="'orderDetail.title' | translate" [showBackButton]="true"></app-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <div class="outline-card">
    <div class="no-padding">
      <div class="title-wrap">
        <span class="title-primary">{{ order?.OrderDetails?.[0]?.ProductName }} </span>
        <span class="title-accent">{{ order?.OrderDetails?.[0]?.ProductDescription }}</span>
      </div>
    </div>

    <div>

      <!-- Khối thông tin đơn hàng -->
      <ion-list lines="none" class="kv-list">
        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.time' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.OrderDetails?.[0]?.DurationDays }} {{ 'days' | translate }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.orderCode' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.OrderNumber }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.orderValue' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.TotalAmount | currency:'VND':'symbol':'1.0-0':'vi-VN' }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.status' | translate }}</ion-label>
          <ion-chip slot="end" [color]="order?.Status === 1 ? 'success' : 'danger'" outline="true">
            <ion-label>{{ statusText }}</ion-label>
          </ion-chip>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.paymentMethod' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.PaymentMethod === 1 ? 'Momo' : 'ZaloPay' }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.updatedAt' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.CreatedDate | date:'HH:mm dd/MM/yyyy':'vi-VN' }}
          </ion-note>
        </ion-item>
      </ion-list>

      <ion-item-divider class="hairline"></ion-item-divider>

      <!-- Chi tiết thanh toán -->
      <div class="section-title">{{ 'orderDetail.sectionTitle' | translate }}</div>

      <ion-list lines="none" class="kv-list">
        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.value' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.TotalAmount | currency:'VND':'symbol':'1.0-0':'vi-VN' }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.discount' | translate }}</ion-label>
          <ion-note slot="end" class="kv-value">
            {{ order?.DiscountAmount | currency:'VND':'symbol':'1.0-0':'vi-VN' }}
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label class="kv-label">{{ 'orderDetail.totalPay' | translate }}</ion-label>
          <ion-note slot="end" class="kv-total">
            {{ order?.TotalAmount | currency:'VND':'symbol':'1.0-0':'vi-VN' }}
          </ion-note>
        </ion-item>
      </ion-list>

    </div>
  </div>

  <!-- Skeleton khi loading -->
  <ng-container *ngIf="loading">
    <div class="outline-card">
      <div class="no-padding">
        <ion-skeleton-text animated style="width: 70%"></ion-skeleton-text>
      </div>
      <div>
        <ion-skeleton-text animated></ion-skeleton-text>
        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
      </div>
    </div>
  </ng-container>

</ion-content>