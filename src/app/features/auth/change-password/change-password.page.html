<!-- Header (iOS style) -->
<ion-header class="ion-no-border no-background">
  <ion-toolbar class="no-background">
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Status bar divider mimic -->
  <app-section-logo></app-section-logo>

  <!-- Title -->
  <h1 class="title color-violet">{{ 'changePassword.title' | translate }}</h1>

  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="submit()" class="form padding-top-10">
    <!-- Current Password -->
    <div class="field-card"
      [class.invalid]="form.controls.currentPassword.touched && form.controls.currentPassword.invalid">
      <ion-icon name="lock-closed-outline" class="field-icon"></ion-icon>
      <ion-input size="10" formControlName="currentPassword" [type]="showCurrentPw() ? 'text' : 'password'"
        [placeholder]="('changePassword.current' | translate)"
        [attr.aria-label]="('changePassword.current' | translate)"></ion-input>
      <ion-icon class="eye" (click)="toggleCurrentPw()"
        [name]="showCurrentPw() ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
    </div>

    <!-- New Password -->
    <div class="field-card" [class.invalid]="form.controls.newPassword.touched && form.controls.newPassword.invalid">
      <ion-icon name="lock-closed-outline" class="field-icon"></ion-icon>
      <ion-input size="10" formControlName="newPassword" [type]="showNewPw() ? 'text' : 'password'"
        [placeholder]="('changePassword.new' | translate)"
        [attr.aria-label]="('changePassword.new' | translate)"></ion-input>
      <ion-icon class="eye" (click)="toggleNewPw()" [name]="showNewPw() ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
    </div>

    <!-- Confirm New Password -->
    <div class="field-card"
      [class.invalid]="(form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid) || form.errors?.['mismatch']">
      <ion-icon name="lock-closed-outline" class="field-icon"></ion-icon>
      <ion-input size="10" formControlName="confirmPassword" [type]="showConfirmPw() ? 'text' : 'password'"
        [placeholder]="('changePassword.confirm' | translate)"
        [attr.aria-label]="('changePassword.confirm' | translate)"></ion-input>
      <ion-icon class="eye" (click)="toggleConfirmPw()"
        [name]="showConfirmPw() ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
    </div>

    <!-- Submit -->
    <button class="gradient-btn margin-bottom-10" type="submit"
      [attr.aria-label]="('changePassword.submit' | translate)">
      <span>{{ 'changePassword.submit' | translate }}</span>
    </button>
  </form>

  <!-- Back to profile -->
  <div class="register-line">
    <span>{{ 'changePassword.back' | translate }} </span>
    <button class="link underline" type="button" (click)="goBack()">{{ 'changePassword.backProfile' | translate
      }}</button>
  </div>
</ion-content>