<!-- Header -->
<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button fill="clear" (click)="goBack()" aria-label="Quay lại">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title class="ion-text-center">
      Xưa & Nay ( số Tết Canh Dần 349 + 350)
    </ion-title>

    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="more()" aria-label="Tùy chọn">
        <ion-icon name="ellipsis-horizontal"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Content -->
<ion-content [fullscreen]="true" class="reader">
  <div class="stack">
    <!-- Danh sách trang (dùng id page-1..page-N để có thể scrollTo) -->
    <ng-container *ngFor="let src of pages; let i = index">
      <img #pageEl class="page" [id]="'page-' + (i+1)" [src]="src" [alt]="'Page ' + (i+1)" />
    </ng-container>
  </div>

  <!-- Controls nổi -->
  <div class="controls">
    <div class="left">
      <button class="btn wide" aria-label="Mục lục" (click)="openToc()">
        <ion-icon name="list-outline"></ion-icon>
      </button>
      <div class="counter">
        <span class="chip">{{ current() }}</span><span>/{{ totalPages }}</span>
      </div>
    </div>
    <button class="round-btn" aria-label="Hành động phụ" (click)="chat()">
      <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M1.79998 15.95C1.44989 15.95 1.11415 16.09 0.8666 16.3393C0.619051 16.5886 0.47998 16.9267 0.47998 17.2792V19.9375C0.47998 20.29 0.619051 20.6281 0.8666 20.8774C1.11415 21.1266 1.44989 21.2667 1.79998 21.2667C2.15007 21.2667 2.48581 21.1266 2.73336 20.8774C2.98091 20.6281 3.11998 20.29 3.11998 19.9375V17.2792C3.11998 16.9267 2.98091 16.5886 2.73336 16.3393C2.48581 16.09 2.15007 15.95 1.79998 15.95ZM28.2 15.95C27.8499 15.95 27.5141 16.09 27.2666 16.3393C27.0191 16.5886 26.88 16.9267 26.88 17.2792V19.9375C26.88 20.29 27.0191 20.6281 27.2666 20.8774C27.5141 21.1266 27.8499 21.2667 28.2 21.2667C28.5501 21.2667 28.8858 21.1266 29.1334 20.8774C29.3809 20.6281 29.52 20.29 29.52 19.9375V17.2792C29.52 16.9267 29.3809 16.5886 29.1334 16.3393C28.8858 16.09 28.5501 15.95 28.2 15.95ZM21.6 6.64583H16.32V4.9445C16.719 4.71255 17.0508 4.37949 17.2823 3.97842C17.5139 3.57736 17.6372 3.12225 17.64 2.65833C17.64 1.9533 17.3618 1.27714 16.8667 0.778608C16.3716 0.280074 15.7002 0 15 0C14.2998 0 13.6283 0.280074 13.1332 0.778608C12.6381 1.27714 12.36 1.9533 12.36 2.65833C12.3628 3.12225 12.4861 3.57736 12.7176 3.97842C12.9492 4.37949 13.281 4.71255 13.68 4.9445V6.64583H8.39998C7.34972 6.64583 6.34248 7.06594 5.59984 7.81375C4.85719 8.56155 4.43998 9.57578 4.43998 10.6333V22.5958C4.43998 23.6534 4.85719 24.6676 5.59984 25.4154C6.34248 26.1632 7.34972 26.5833 8.39998 26.5833H21.6C22.6502 26.5833 23.6575 26.1632 24.4001 25.4154C25.1428 24.6676 25.56 23.6534 25.56 22.5958V10.6333C25.56 9.57578 25.1428 8.56155 24.4001 7.81375C23.6575 7.06594 22.6502 6.64583 21.6 6.64583ZM22.92 22.5958C22.92 22.9484 22.7809 23.2864 22.5334 23.5357C22.2858 23.785 21.9501 23.925 21.6 23.925H8.39998C8.0499 23.925 7.71415 23.785 7.4666 23.5357C7.21905 23.2864 7.07998 22.9484 7.07998 22.5958V10.6333C7.07998 10.2808 7.21905 9.94274 7.4666 9.69347C7.71415 9.4442 8.0499 9.30417 8.39998 9.30417H10.0104L11.04 11.194C11.1123 11.4889 11.2827 11.75 11.5228 11.9338C11.763 12.1176 12.0584 12.213 12.36 12.2042H17.64C17.9415 12.213 18.237 12.1176 18.4771 11.9338C18.7173 11.75 18.8877 11.4889 18.96 11.194L19.9896 9.30417H21.6C21.9501 9.30417 22.2858 9.4442 22.5334 9.69347C22.7809 9.94274 22.92 10.2808 22.92 10.6333V22.5958Z"
          fill="url(#paint0_linear_54910_2584)" />
        <path
          d="M10.3209 13.8945C10.7982 13.8945 11.2568 14.0849 11.5943 14.4248C11.9319 14.7647 12.1217 15.2263 12.1217 15.707C12.1216 16.0654 12.0157 16.4159 11.818 16.7139C11.6202 17.0119 11.3392 17.2446 11.0103 17.3818C10.6815 17.519 10.3194 17.5543 9.9703 17.4844C9.62114 17.4144 9.30016 17.2418 9.04843 16.9883C8.7968 16.7349 8.6257 16.412 8.55624 16.0605C8.48682 15.7091 8.52174 15.3447 8.6578 15.0137C8.79398 14.6826 9.02507 14.3993 9.32089 14.2002C9.6168 14.0011 9.96501 13.8946 10.3209 13.8945ZM19.9215 13.8945C20.3987 13.8946 20.8565 14.0851 21.1939 14.4248C21.5315 14.7647 21.7213 15.2263 21.7213 15.707C21.7212 16.0654 21.6153 16.4159 21.4176 16.7139C21.2198 17.0118 20.9388 17.2447 20.61 17.3818C20.2811 17.5189 19.919 17.5543 19.5699 17.4844C19.2208 17.4144 18.8997 17.2417 18.648 16.9883C18.3965 16.7349 18.2253 16.412 18.1559 16.0605C18.0864 15.7091 18.1223 15.3448 18.2584 15.0137C18.3946 14.6825 18.6255 14.3994 18.9215 14.2002C19.2175 14.001 19.5655 13.8945 19.9215 13.8945Z"
          fill="url(#paint1_linear_54910_2584)" />
        <defs>
          <linearGradient id="paint0_linear_54910_2584" x1="30.0001" y1="1.20834" x2="0.423224" y2="26.9845"
            gradientUnits="userSpaceOnUse">
            <stop stop-color="#FC2D67" />
            <stop offset="1" stop-color="#8E1FBB" />
          </linearGradient>
          <linearGradient id="paint1_linear_54910_2584" x1="21.9395" y1="14.0593" x2="19.4336" y2="21.3391"
            gradientUnits="userSpaceOnUse">
            <stop stop-color="#FC2D67" />
            <stop offset="1" stop-color="#8E1FBB" />
          </linearGradient>
        </defs>
      </svg>
    </button>
  </div>
</ion-content>